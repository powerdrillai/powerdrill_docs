{"openapi":"3.0.1","info":{"title":"个人项目","description":"","version":"1.0.0"},"tags":[],"paths":{"/v1/sessions":{"post":{"summary":"Create session","deprecated":false,"description":"session 创建上限150条","tags":[],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}\n","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","description":"名称"},"config":{"$ref":"#/components/schemas/sessionConfig"}},"required":["title","config"]},"example":{"config":{"languageType":"EN","maxMessagesInContext":10,"mediaTtl":7200},"title":"测试"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;\n100105-maxMessageInContext param value must in 1 and 100；\n100106-mediaTtl param value must in 1 and 6000;\n\n\n"},"data":{"type":"string","description":"sessionId"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":"06e29045-cca9-4326-b324-fdff14375ee3"}}}}},"headers":{}}},"security":[]},"get":{"summary":"List session","deprecated":false,"description":"","tags":[],"parameters":[{"name":"title","in":"query","description":"","required":false,"schema":{"type":"string"}},{"name":"pageNumber","in":"query","description":"","required":false,"schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"","required":false,"schema":{"type":"integer"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}\n","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"object","properties":{"total":{"type":"integer"},"pageNumber":{"type":"integer"},"pageSize":{"type":"integer"},"records":{"type":"array","items":{"$ref":"#/components/schemas/SessionModelDTO"}}},"required":["total","pageNumber","pageSize","records"]}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"total":4,"pageSize":10,"pageNumber":1,"records":[{"id":"5534f591-1520-4e74-b753-b87615b2c57a","title":"new title","config":{"languageType":"IT","mediaTtl":10,"maxMessagesInContext":10}},{"id":"ebeeec8d-84f8-448e-bb56-6331807e4e7a","title":"测试2","config":{"languageType":"EN","mediaTtl":600,"maxMessagesInContext":10}},{"id":"06e29045-cca9-4326-b324-fdff14375ee3","title":"测试","config":{"languageType":"EN","mediaTtl":600,"maxMessagesInContext":10}},{"id":"fb0358b2-4280-400d-97f0-f82c4e9edb95","title":"Hello","config":{"languageType":"AUTO","mediaTtl":600,"maxMessagesInContext":10}}]}}}}}},"headers":{}}},"security":[]}},"/v1/sessions/{sessionId}":{"patch":{"summary":"Modify session","deprecated":false,"description":"","tags":[],"parameters":[{"name":"sessionId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}\n","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"config":{"$ref":"#/components/schemas/sessionConfig"}},"required":["title","config"]},"example":{"config":{"languageType":"IT","maxMessagesInContext":0,"mediaTtl":10},"title":"new title"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;\n100105-maxMessageInContext param value must in 1 and 100；\n100106-mediaTtl param value must in 1 and 6000;"},"data":{"type":"string","description":"sessionId","title":"业务数据"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0}}}}},"headers":{}}},"security":[]},"delete":{"summary":"Delete session","deprecated":false,"description":"","tags":[],"parameters":[{"name":"sessionId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}\n","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"string"}},"required":["code"]}}},"headers":{}}},"security":[]},"get":{"summary":"Get session","deprecated":false,"description":"","tags":[],"parameters":[{"name":"sessionId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}\n","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"$ref":"#/components/schemas/SessionModelDTO"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"id":"06e29045-cca9-4326-b324-fdff14375ee3","title":"测试","config":{"languageType":"EN","mediaTtl":600,"maxMessagesInContext":10}}}}}}},"headers":{}}},"security":[]}},"/v1/sessions/{sessionId}/history":{"get":{"summary":"Get session history","deprecated":false,"description":"","tags":[],"parameters":[{"name":"sessionId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"pageNumber","in":"query","description":"","required":false,"schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"","required":false,"schema":{"type":"integer"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}\n","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"object","properties":{"total":{"type":"integer"},"pageNumber":{"type":"integer"},"pageSize":{"type":"integer"},"records":{"type":"array","items":{"$ref":"#/components/schemas/ConversationDTO"}}},"required":["total","pageNumber","pageSize","records"]}},"required":["data","code"]}}},"headers":{}}},"security":[]}},"/v1/datasets":{"post":{"summary":"Create dataset","deprecated":false,"description":"创建数据集","tags":[],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name"]},"example":{"description":"mysql的所有文档数据","name":"mysql数据集"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"string","description":"datasetId"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":"cm1gikb42001fr3x29gbvxwfa"}}}}},"headers":{}}},"security":[{"bearer":[]}]},"get":{"summary":"List dataset","deprecated":false,"description":"","tags":[],"parameters":[{"name":"pageNumber","in":"query","description":"","required":false,"schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"","required":false,"schema":{"type":"integer"}},{"name":"name","in":"query","description":"","required":false,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"object","properties":{"pageNumber":{"type":"integer"},"pageSize":{"type":"integer"},"total":{"type":"integer"},"records":{"type":"array","items":{"$ref":"#/components/schemas/DatasetDTO"}}},"required":["pageNumber","pageSize","total","records"]}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"total":31,"pageSize":10,"pageNumber":1,"records":[{"id":"cm1gir4jz0020r3x2qnfb9prx","name":"1mysql数据集","description":"1mysql的所有文档数据"},{"id":"clzm3gsix000hqsx2uw7wvw0p","name":"mysql数据集","description":"joker test"},{"id":"clzm303my0000dvx2u0feu0i3","name":"mysql数据集","description":"joker test"},{"id":"clzm2w8xj0000gnx2w041itzy","name":"mysql数据集","description":"joker test"},{"id":"clzm2t6np000ndpx2bh7ls777","name":"mysql数据集","description":"joker test"},{"id":"clzm2sal6000ldpx2e3tvvmez","name":"mysql数据集","description":"joker test"},{"id":"clzm2s2bm000jdpx2i6f2kowz","name":"mysql数据集","description":"joker test"},{"id":"clzm2rvpp000hdpx2qghug9sg","name":"mysql数据集","description":"joker test"},{"id":"clzm2eey4000hf7x2t51u19o0","name":"mysql数据集","description":"joker test"},{"id":"clzm2b64600004mx25cvu0ngi","name":"mysql数据集","description":"joker test"}]}}}}}},"headers":{}}},"security":[]}},"/v1/datasets/{datasetId}":{"delete":{"summary":"Delete dataset","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"string"}},"required":["code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0}}}}},"headers":{}}},"security":[]},"patch":{"summary":"Modify dataset","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name"]},"example":{"name":"dataset"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"string","nullable":true}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0}}}}},"headers":{}}},"security":[]}},"/v1/datasets/{datasetId}/status":{"get":{"summary":"Get dataset status","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"string","description":"synched: 表示全部文件处理成功\nprocessing：表示有文件还在处理中\npart_error: 表示有处理失败的文件\nempty_datasource: Dataset下无文件\n"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":"synched"}}}}},"headers":{}}},"security":[]}},"/v1/datasets/{datasetId}/datasources":{"post":{"summary":"Create datasource in dataset","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SingleDatasourceRequest"},"example":{"ext":"csv","name":"测试version.csv","type":"FILE","url":"https://s3.amazonaws.com/powerdrilltest/user/clvl4cad2001q01l1m522hxlu/upload/f9773f1e-cd68-489a-8121-d566ca9218b1.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240924T143419Z&X-Amz-SignedHeaders=host&X-Amz-Expires=599&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240924%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=9ca0c58d508926a5811818041d557ffb53c64025dae94c0855280d457c7089a2"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"$ref":"#/components/schemas/DatasourceDTO"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"id":"cm1gjg1kf0001kcx2puywmzbv","datasetId":"cm1gir4jz0020r3x2qnfb9prx","name":"测试csv","type":"FILE","url":"https://s3.amazonaws.com/powerdrilltest/user/clvl4cad2001q01l1m522hxlu/upload/f9773f1e-cd68-489a-8121-d566ca9218b1.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240924T143419Z&X-Amz-SignedHeaders=host&X-Amz-Expires=599&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240924%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=9ca0c58d508926a5811818041d557ffb53c64025dae94c0855280d457c7089a2","ext":"csv","status":"pending"}}}}}},"headers":{}}},"security":[]},"get":{"summary":"List datasources","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"pageNumber","in":"query","description":"","required":false,"example":1,"schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"","required":false,"example":10,"schema":{"type":"integer"}},{"name":"name","in":"query","description":"","required":false,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"object","properties":{"total":{"type":"integer"},"pageSize":{"type":"integer"},"pageNumber":{"type":"integer"},"records":{"type":"array","items":{"$ref":"#/components/schemas/DatasourceDTO"}}},"required":["total","pageSize","pageNumber","records"]}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"total":1,"pageSize":10,"pageNumber":1,"records":[{"id":"cm1gjmmoo0001h0x24uk1xgu9","datasetId":"cm1gjmg8e0057r3x22v1fdu8m","name":"测试version2csv","type":"FILE","url":"https://s3.amazonaws.com/powerdrilltest/user/clvl4cad2001q01l1m522hxlu/upload/f9773f1e-cd68-489a-8121-d566ca9218b1.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240924T143419Z&X-Amz-SignedHeaders=host&X-Amz-Expires=599&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240924%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=9ca0c58d508926a5811818041d557ffb53c64025dae94c0855280d457c7089a2","ext":"csv","status":"pending"}]}}}}}},"headers":{}}},"security":[]}},"/v1/datasets/{datasetId}/datasource/{datasourceId}":{"delete":{"summary":"Delete datasources","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"datasourceId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"type":"string","nullable":true}},"required":["code"]}}},"headers":{}}},"security":[]}},"/v1/datasets/{datasetId}/datasources/{datasourceId}":{"get":{"summary":"Get datasource","deprecated":false,"description":"","tags":[],"parameters":[{"name":"datasetId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"datasourceId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"$ref":"#/components/schemas/DatasourceDTO"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"id":"cm1gjmmoo0001h0x24uk1xgu9","datasetId":"cm1gjmg8e0057r3x22v1fdu8m","name":"测试version2.csv","type":"FILE","url":"https://s3.amazonaws.com/powerdrilltest/user/clvl4cad2001q01l1m522hxlu/upload/f9773f1e-cd68-489a-8121-d566ca9218b1.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240924T143419Z&X-Amz-SignedHeaders=host&X-Amz-Expires=599&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240924%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=9ca0c58d508926a5811818041d557ffb53c64025dae94c0855280d457c7089a2","ext":"csv","status":"pending"}}}}}},"headers":{}}},"security":[]}},"/v1/datasources":{"post":{"summary":"Create datasource","deprecated":false,"description":"","tags":[],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string","description":"FILE"},"url":{"type":"string"},"ext":{"type":"string"}},"required":["name","type","url","ext"]},"example":{"name":"test.csv","type":"FILE","url":"https://commontestdata-1312904344.cos.ap-shanghai.myqcloud.com/aidata/KIE/s1_pages/train.csv","ext":"csv"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"},"data":{"$ref":"#/components/schemas/DatasourceDTO"}},"required":["data","code"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"data":{"id":"cm1zvcymv000101fcluu1htgr","datasetId":"cm0buoeeq02v201l1pp7payr6","name":"jinxi test datasource.csv","type":"FILE","url":"https://commontestdata-1312904344.cos.ap-shanghai.myqcloud.com/aidata/KIE/s1_pages/train.csv","ext":"csv","status":"pending"}}}}}},"headers":{}}},"security":[]}},"/v1/chat/completions":{"post":{"summary":"Query","deprecated":false,"description":"","tags":[],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"{{'Bearer 21ff0a65-42c4-4f7a-a723-86547781f7cc'}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"sessionId":{"type":"string"},"stream":{"type":"boolean"},"question":{"type":"string"},"datasetId":{"type":"string"},"datasourceIdList":{"type":"array","items":{"type":"string"},"description":"limit 1000"},"history":{"type":"array","items":{"$ref":"#/components/schemas/HistoryDTO"},"description":"history不传或者为空时，使用session的历史消息，消息条数由session config中maxMessagesInContext指定;\nhistory不为空则优先使用，忽略session的history"},"languageType":{"type":"string"}},"required":["question","datasetId","datasourceIdList","sessionId"]},"example":{"datasetId":"cm1gjmg8e0057r3x22v1fdu8m","datasourceIdList":["cm1gjmmoo0001h0x24uk1xgu9"],"history":[{"answer":"test","question":"test"}],"languageType":"IT","question":"Hello World","sessionId":"5534f591-1520-4e74-b753-b87615b2c57a","stream":true}}}},"responses":{"200":{"description":"","content":{"text/event-stream":{"schema":{"type":"object","properties":{}},"examples":{"1":{"summary":"Stream=true成功示例","value":"event:AI_MESSAGE_ID\ndata:e56c0756-b791-4bd6-831e-1dec2827dda1\n\nid:24f99642-d673-4082-8370-8b7910989e6e\nevent:TASK\ndata:{\"id\":\"24f99642-d673-4082-8370-8b7910989e6e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":{\"name\":\"Analyze\",\"id\":\"24f99642-d673-4082-8370-8b7910989e6e\",\"status\":\"running\",\"stage\":\"Analyze\",\"properties\":{}}},\"index\":0}],\"created\":1726129903}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- **Product quality and accuracy**: Mentioned 87 times.\\n\"},\"index\":0}],\"created\":1726129929}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- **Reducing packaging waste**: Mentioned 90 times.\\n\"},\"index\":0}],\"created\":1726129929}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- **Other areas**: \\\"Add more familiar brands to the list\\\" and \\\"I have no problem with Amazon yet. But others tell me about the refund issues\\\" were mentioned once each.\\n\\n\"},\"index\":0}],\"created\":1726129930}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"#### Male, Prefer not to say, and Others\\n\"},\"index\":0}],\"created\":1726129931}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"\"},\"index\":0}],\"created\":1726129931}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"\\n\"},\"index\":0}],\"created\":1726129931}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:TABLE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":{\"name\":\"gender_improvement_areas_count.csv\",\"url\":\"s3://powerdrill-s3/tmp_datasource_cache/code_result/clvl506oq00ey01l1yq495j49/fa732497-927c-4915-b324-3eb3d934e763.csv\"}},\"index\":0}],\"created\":1726129931}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"\\n\\n\"},\"index\":0}],\"created\":1726129931}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- The data provided does not include specific frequencies for these genders. Additional context is needed to provide a detailed analysis for these groups.\\n\\n\"},\"index\":0}],\"created\":1726129932}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"### Conclusion and Insights\\n\"},\"index\":0}],\"created\":1726129932}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- **Customer service responsiveness** is the most frequently mentioned area for improvement overall and among females.\\n\"},\"index\":0}],\"created\":1726129933}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- **Product quality and accuracy** and **Reducing packaging waste** are also significant areas of concern.\\n\"},\"index\":0}],\"created\":1726129933}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:MESSAGE\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"- **Gender-specific insights**: Females have highlighted similar top concerns as the overall data, but additional data is needed to understand the perspectives of males and other gender categories.\"},\"index\":0}],\"created\":1726129935}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:QUESTIONS\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":[\"Analyze the correlation between age groups and the areas for improvement mentioned. Are there specific concerns that are more prevalent in certain age groups?\",\"Investigate the relationship between purchase frequency and the areas for improvement. Do frequent shoppers have different concerns compared to occasional shoppers?\",\"Examine the impact of browsing frequency on the areas for improvement. Are there any notable differences in feedback from users who browse frequently versus those who browse rarely?\"]},\"index\":0}],\"created\":1726129935}\n\nid:4020d1e8-5969-4ad3-8dd8-8ba08404735e\nevent:TASK\ndata:{\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":{\"name\":\"Conclusions\",\"id\":\"4020d1e8-5969-4ad3-8dd8-8ba08404735e\",\"status\":\"done\",\"stage\":\"Respond\",\"properties\":{}}},\"index\":0}],\"created\":1726129935}\n\nid:-1\nevent:TAG\ndata:{\"id\":\"-1\",\"model\":\"\",\"choices\":[{\"delta\":{\"content\":\"AAPlanner<[{\\\"type\\\": \\\"Data Analyzing\\\", \\\"description\\\": \\\"Extract and count the frequency of each unique value in the 'Improvement_Areas' column to identify the most frequently mentioned areas for improvement.\\\", \\\"input\\\": [\\\"input_1\\\"], \\\"output\\\": [\\\"improvement_areas_count\\\"]}, {\\\"type\\\": \\\"Data Analyzing\\\", \\\"description\\\": \\\"Group the data by 'Gender' and 'Improvement_Areas' to count the frequency of each improvement area mentioned by different genders.\\\", \\\"input\\\": [\\\"input_1\\\"], \\\"output\\\": [\\\"gender_improvement_areas_count\\\"]}, {\\\"type\\\": \\\"Data QA\\\", \\\"description\\\": \\\"Identify the most frequently mentioned areas for improvement and describe how these areas differ between genders based on the processed data.\\\", \\\"input\\\": [\\\"improvement_areas_count\\\", \\\"gender_improvement_areas_count\\\"], \\\"output\\\": []}]>\"},\"index\":0}],\"created\":1726129935}\n\nevent:END_MARK\ndata:[DONE]\n\n"},"2":{"summary":"Stream=false成功示例","value":"{\n    \"messageId\": \"b2131e61-4714-48d9-935e-f8bbda199d62\",\n    \"messages\": [\n        {\n            \"type\": \"MESSAGE\",\n            \"content\": \"#### Data Analyzing\\n\",\n            \"groupId\": \"\",\n            \"groupName\": \"\",\n            \"stage\": \"Respond\"\n        },\n        {\n            \"type\": \"CHART\",\n            \"content\": {\n                \"code\": \"SELECT n.n_name, COUNT(c.c_custkey) AS customer_count\\\\nFROM customer c\\\\nJOIN nation n ON c.c_nationkey = n.n_nationkey\\\\nGROUP BY n.n_name\",\n                \"name\": \"result_data\",\n                \"url\": \"https://s3.amazonaws.com/powerdrilltest/user/tmp/tmp/1b8022ef-ba95-4045-b5b3-12bd5007fd1b/result_data.json?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240927T022048Z&X-Amz-SignedHeaders=host&X-Amz-Expires=9&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240927%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=820cb0d0459b995b59cbe1ed480557f35aaf451c0fa815e450cb5a922afafd82\",\n                \"codeType\": \"SQL\",\n                \"datasourceId\": \"TPC-H\",\n                \"datasetId\": \"DATASET_ID\",\n                \"imageUrl\": \"\",\n                \"chartConfig\": {\n                    \"columns\": [\n                        \"n_name\",\n                        \"customer_count\"\n                    ],\n                    \"legend\": \"none\",\n                    \"chartName\": \"National Distribution of Consumers\",\n                    \"xField\": \"n_name\",\n                    \"xLabel\": \"Nation\",\n                    \"yFields\": [\n                        \"customer_count\"\n                    ],\n                    \"chartType\": \"pie\",\n                    \"supportedTypes\": [\n                        \"table\",\n                        \"line\",\n                        \"pie\",\n                        \"area\",\n                        \"bar\",\n                        \"doughnut\"\n                    ]\n                }\n            },\n            \"groupId\": \"\",\n            \"groupName\": \"\",\n            \"stage\": \"Respond\"\n        },\n        {\n            \"type\": \"IMAGE\",\n            \"content\": [\n                \"https://s3.amazonaws.com/powerdrilltest/aa/gender_distribution/3423423534523.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240927T022048Z&X-Amz-SignedHeaders=host&X-Amz-Expires=10&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240927%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=9f2c98cbfe64ec2b5d5f24c629fc14213bc8ff7bc6292e343f06d0f657637729\",\n                \"https://s3.amazonaws.com/powerdrilltest/powerdrilltest/aa/gender_distributionfdsfsdfsdf.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240927T022048Z&X-Amz-SignedHeaders=host&X-Amz-Expires=10&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240927%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=9bab170f9a04ebfd17f646f683d9449f8aa67c9a8ab42672c69ac0ad61409bb0\"\n            ],\n            \"groupId\": \"\",\n            \"groupName\": \"\",\n            \"stage\": \"Respond\"\n        },\n        {\n            \"type\": \"TABLE\",\n            \"content\": \"https://s3.amazonaws.com/powerdrilltest/sdfasdf/123.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240927T022048Z&X-Amz-SignedHeaders=host&X-Amz-Expires=10&X-Amz-Credential=AKIARLSQLXURHEIDN4OZ%2F20240927%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=52bea331d38ff76e5dcc02d7dc020b131bee3d66a6547e4599e215b798b745d5\",\n            \"groupId\": \"\",\n            \"groupName\": \"\",\n            \"stage\": \"Respond\"\n        },\n        {\n            \"type\": \"MESSAGE\",\n            \"content\": \"#### Data Analyzing11111\\n\",\n            \"groupId\": \"\",\n            \"groupName\": \"\",\n            \"stage\": \"Respond\"\n        }\n    ]\n}"}}}},"headers":{}}},"security":[]}}},"components":{"schemas":{"DatasourceDTO":{"type":"object","properties":{"id":{"type":"string"},"datasetId":{"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"url":{"type":"string"},"ext":{"type":"string"},"status":{"type":"string","title":"文件同步状态","description":"pending-待处理\nrunning-处理中\nsynched-同步完成\nerror-处理失败\nusage_limit_reached-额度受限\n"}},"required":["id","name","type","datasetId","status","url","ext"]},"SingleDatasourceRequest":{"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string","description":"FILE"},"url":{"type":"string"},"ext":{"type":"string"}},"required":["name","type","url","ext"]},"SessionModelDTO":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"config":{"$ref":"#/components/schemas/sessionConfig"}},"required":["id","title","config"]},"sessionConfig":{"type":"object","properties":{"languageType":{"type":"string","title":"输出语言类型","description":"默认English"},"mediaTtl":{"type":"integer","title":"媒体生命周期","description":"单位秒，默认1小时"},"maxMessagesInContext":{"type":"integer","title":"上下文的消息数量上限","description":"默认10"}}},"MessageDTO":{"type":"object","properties":{"messageId":{"type":"string"},"content":{"type":"string"}},"required":["messageId","content"]},"HistoryDTO":{"type":"object","properties":{"question":{"type":"string"},"answer":{"type":"string"}},"required":["question","answer"]},"DatasetDTO":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"}},"required":["id","name","description"]},"ConversationDTO":{"type":"object","properties":{"question":{"$ref":"#/components/schemas/MessageDTO"},"answers":{"type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}}},"required":["answers","question"]},"返回模型":{"type":"object","properties":{"code":{"type":"integer","title":"业务码","description":"正确返回0,\n错误枚举：\n100-Bad request;\n201-Request frequency limit;\n9999-Internal error;\n100001-operate.invalid;"}},"required":["code"]}},"securitySchemes":{"bearer":{"type":"http","scheme":"bearer"}}},"servers":[]}