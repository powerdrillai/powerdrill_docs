---
title: "Streaming"
description: "Know all about our streaming capability"
---

Powerdrill Enterprise Open API supports streaming responses to clients, enabling partial results for specific requests. This functionality is implemented using the [Server-Sent Events (SSE)](https://html.spec.whatwg.org/multipage/server-sent-events.html#server-sent-events) standard.



## How to understand streaming responses

The response to each request consists of a series of response blocks. When streaming mode is enabled for a request, Powerdrill will send real-time updates to the client, delivering continuous response blocks as they becomes available. 

The structure of a response block is as follows:

```json
{
    "id": "<group_id>",
    "model": "",
    "choices": [
        {
            "delta": {
                "content": "<content>"
            },
            "index": 0
        }
    ],
    "created": 1731664172,
    "groupId": "<group_id>",
    "groupName": "<group_name>",
    "stage": "<block_stage>"
}
```

Each streaming response block contains the following fields:

- `id` and `groupId`: The ID of the group to which the response block belongs.

    A group in the streaming response is a collection of response blocks. For example, in a general job, each step in the `Analyze` stage is a group, and the entire `Respond` stage is a group.

- `content`: The content of the response block, which varies with the block type. For more details, see [Content description](#content-description).

- `created`: The timestamp indicating when the content was created.

- `groupId`: The ID of the group to which the response block belongs.  

- `groupName`: The name of the group, such as `Conclusions`.

- `stage`: The stage to which the response block belongs. Two stages are available: `Analyze` and `Respond`.


### Content description

The value of `content` in each response block varies with the block content type:

- When the block content type is `MESSAGE`:

    The content is a piece of text.

- When the block content type is `CODE`:

    The content is a code snippet in Markdown format.


- When the block content type is `TABLE`:

    The content represents a table, consisting of:
    
    - `name`: The `.csv` file name.
    
    - `url`: The S3 key or URL to the file.
    
    - `expiredAt`: The expiration time for `url`. To save the table for future use, make sure to download it before it expires.


- When the block content type is `IMAGE`:

    The content represents an image, consisting of:
    
    - `name`: The image name.
    
    - `url`: The S3 key or URL to the image.
    
    - `expiredAt`: The expiration time for `url`. To save the image for future use, make sure to download it before it expires.


- When the block content type is `SOURCES`:

    The content represents the source of the response block, including:

    - `source`: The file name of the data source.

    - `datasourceId`: The ID of the data source.

    - `datasetId`: The ID of the dataset.

    - `fileType`: The name extension of the data source file.

- When the block content type is `QUESTIONS`:

    The content represents follow-up questions suggested by Powerdrill. 


Let's see an example.

<Info>
For details about the `POST /v1/jobs` endpoint, see [Create job](create-job).
</Info>


```python Python request
import requests
import json

url = "https://ai.data.cloud/api/v1/job"

payload = json.dumps({
  "datasetId": "cm3my37en3q36017q7x3hyyf4",
  "datasourceIdList": [
    "cm3myfsfc03jn011csb8wah6p"
  ],
  "languageType": "EN",
  "question": "How do 'Digital Services for Taxpayers' scores vary across economies, and which economy has the most advanced digital services?",
  "sessionId": "4440ab38-3df0-465b-a66c-bf6acb0f1bc2",
  "stream": True
})
headers = {
  'x-pd-api-key': '$PD_API_KEY',
  'x-pd-api-agent-id': 'GENERAL',
  'Content-Type': 'application/json'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)
```


